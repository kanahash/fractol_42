/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ft_atof_explanation.c                              :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: kanahash <kanahash@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2025/04/22 21:59:49 by kanahash          #+#    #+#             */
/*   Updated: 2025/04/22 22:07:16 by kanahash         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

// 文字列を浮動小数点数に変換する関数
double	ft_atof(const char *str)
{
	int sign;   // 数値の符号（1: 正、-1: 負）
	double nmb; // 数値部分（整数部および小数部）
	int power;  // 小数部の桁数を管理するための変数
	nmb = 0;    // 初期値として0に設定
	sign = 1;   // 初期値として正の符号に設定
	// 空白文字（スペースやタブ、改行など）をスキップ
	while ((*str >= 9 && *str <= 13) || *str == 32)
		str++;
	// 数字の前に符号があるか確認
	if (*str == '-' || *str == '+')
	{
		// 符号があれば、符号を設定し、次の文字に進む
		if (*str++ == '-')
			sign = -1; // マイナスの場合、符号を-1に設定
	}
	// 整数部分を処理
	while (ft_isdigit(*str))             // 数字が続く間、処理を繰り返す
		nmb = nmb * 10 + (*str++ - '0'); // nmbに10倍して次の数字を加算
	// 小数点があれば、小数部分の処理を開始
	if (*str == '.')
		str++; // 小数点をスキップ
	power = 1; // powerを1に初期化。小数部の桁数を管理するために使う
	// 小数部分を処理
	while (ft_isdigit(*str)) // 数字が続く間、処理を繰り返す
	{
		nmb = nmb * 10 + (*str++ - '0'); // 小数部分の数字をnmbに加算
		power *= 10;                     // 小数部の桁数を管理するためにpowerを10倍
	}
	// 計算結果を返す。符号付きのnmbを小数部を表すpowerで割る
	return (sign * nmb / power);
}
