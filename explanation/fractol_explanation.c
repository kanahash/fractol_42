/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   fractol_explanation.c                              :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: kanahash <kanahash@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2025/04/19 12:20:14 by kanahash          #+#    #+#             */
/*   Updated: 2025/04/19 12:20:19 by kanahash         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "fractol.h" // フラクタルの処理に必要なヘッダーファイルをインクルード

int	main(int ac, char **av) // メイン関数。acは引数の個数、avは引数の値が格納されている配列
{
	t_fractol f; // フラクタルのデータを保持する構造体の変数fを宣言

	// 引数のバリデーションを行う。validならtrue（0）を返し、無効ならfalse（-1）を返す。
	if (!validate(ac, av, &f))
		return (-1); // 引数が無効な場合、-1でプログラム終了

	// フラクタルの初期化を行う。成功したらtrue（0）を返し、失敗した場合はfalse（0）を返す。
	if (!init_data(&f))
		return (0); // 初期化に失敗した場合、プログラム終了（0は成功を意味する）

	// フラクタルのメッセージ操作を行う（詳細はmsg_operation関数内に記載）
	msg_operation();

	// MLXのループフック（フレームごとの更新処理）を設定する
	mlx_loop_hook(f.mlx, &render, &f); // &render関数をフックして描画処理を繰り返し実行

	// ユーザーのキーボードイベントを処理するフック
	mlx_hook(f.win, 2, 1L << 0, &keyboad_event, &f); // キーが押された時に呼ばれる関数を指定

	// ユーザーのマウスイベント（拡大・縮小）を処理するフック
	mlx_hook(f.win, 4, 1L << 2, &mouse_zoom, &f); // マウスがクリックされた時に拡大・縮小処理を呼び出し

	// ウィンドウを閉じるイベントを処理するフック
	mlx_hook(f.win, 17, 0L, &close_window, &f);
	// ウィンドウの「×」ボタンが押されたらclose_windowを呼び出す

	// メインループを開始する。これにより、描画やユーザー操作が繰り返し処理される
	mlx_loop(f.mlx); // フラグメントやキー操作、マウスイベントが反映されるループが開始される

	return (0); // プログラムが正常終了したことを返す
}
